<script>
  document.addEventListener('DOMContentLoaded', () => {
    // 데이터
    const userId = document.querySelector('#userId');
    const email = document.querySelector('#email');
    const phone = document.querySelector('#phone');
    const auth = document.querySelector('#auth');

    // 버튼
    const authBtn = document.querySelector('#auth-btn');
    const findBtn = document.querySelector('#find-btn');

    findBtn.addEventListener('click', () => {
      try {
        axios
          .post('/api/auth/lost/password', {
            userId: userId.value,
            email: email.value,
            phone: phone.value,
          })
          .then((response) => {
            if(!response.data){
              alert('입력하신 정보와 일치하는 정보가 없습니다.');
              return window.location.href = '/view/lost/password';
            }
            window.location.href = `/view/reset/password/${response.data.userId}`;
          })
          .catch((errer) => alert(error.response.data.message));
      } catch (error) {
        console.error(error.message);
      }
    });
  });
</script>
<%-include('components/lost-password-form') %>
